% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tune_imp.R
\name{inject_na}
\alias{inject_na}
\title{Inject NA Values into a Matrix}
\usage{
inject_na(
  obj,
  num_na = NULL,
  rowmax = 0.9,
  colmax = 0.9,
  check_sd = FALSE,
  max_iter = 1000
)
}
\arguments{
\item{obj}{A numeric matrix with \strong{samples in rows} and \strong{features in columns}.}

\item{num_na}{The number of missing values used to estimate prediction quality.}

\item{rowmax}{Number between 0 to 1. NA injection cannot create rows with more missing \% than this number.}

\item{colmax}{Number between 0 to 1. NA injection cannot create cols with more missing \% than this number.}

\item{check_sd}{Check if after NA injections zero variance columns are created or not.}

\item{max_iter}{Maximum number of iterations to attempt finding valid NA positions (default: 1000).}
}
\value{
A vector of integer indices indicating the positions in the matrix
where NAs should be injected.
}
\description{
This helper function randomly selects positions in a matrix to inject a specified number of NA values,
ensuring that the injection does not exceed specified missingness thresholds for rows and columns.
It attempts to find a valid set of positions within a maximum number of iterations.
}
\details{
The function uses the \code{num_na} parameter to determine the number of NAs to inject.
It then repeatedly samples random positions from existing non-NA elements and checks if injecting NAs
at those positions would exceed the missingness thresholds for any row or column (accounting for existing NAs).
If no valid set is found within \code{max_iter} attempts, an error is thrown.
}
\examples{
\dontrun{
mat <- matrix(1:100, nrow = 10, ncol = 10)
# Inject 10 NAs
na_positions <- inject_na(mat, num_na = 10)
mat[na_positions] <- NA
}
}
\keyword{internal}
