% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tune_knn.R
\name{inject_na}
\alias{inject_na}
\title{Inject NA Values into a Matrix}
\usage{
inject_na(obj, num_na = 100, rowmax = 0.9, colmax = 0.9, max_iter = 1000)
}
\arguments{
\item{obj}{A numeric matrix with \strong{samples in rows} and \strong{features in columns}. See details.}

\item{num_na}{The number of missing values used to estimate prediction quality. Must be a positive integer.}

\item{rowmax}{A numeric value between 0 and 1. This is the maximum
allowable proportion of missing values in any single row. If a row
exceeds this threshold, the function will stop with an error.}

\item{colmax}{A numeric value between 0 and 1. This is the threshold for the
proportion of missing values in a column. Columns exceeding this
threshold will be imputed using the column mean instead of k-NN.}

\item{max_iter}{Maximum number of iterations to attempt finding valid NA positions (default: 1000).}
}
\value{
A vector of integer indices indicating the positions in the matrix
where NAs should be injected.
}
\description{
This function randomly selects positions in a matrix to inject a specified number of NA values,
ensuring that the injection does not exceed specified missingness thresholds for rows and columns.
It attempts to find a valid set of positions within a maximum number of iterations.
}
\details{
The function uses the `num_na` parameter to determine the number of NAs to inject.
It then repeatedly samples random positions from existing non-NA elements and checks if injecting NAs
at those positions would exceed the missingness thresholds for any row or column (accounting for existing NAs).
If no valid set is found within `max_iter` attempts, an error is thrown.
}
\examples{
mat <- matrix(1:100, nrow = 10, ncol = 10)
# Inject 10 NAs
na_positions <- inject_na(mat, num_na = 10)
mat[na_positions] <- NA

}
