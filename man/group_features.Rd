% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/group_imp.R
\name{group_features}
\alias{group_features}
\title{Group Features for Imputation}
\usage{
group_features(
  obj,
  features_df,
  k = NULL,
  ncp = NULL,
  subset = NULL,
  min_group_size = 0,
  seed = NULL
)
}
\arguments{
\item{obj}{A numeric matrix with named rows and unique column names. Columns
represent features to be grouped.}

\item{features_df}{A data frame with exactly two columns: \code{feature_id} and
\code{group}. Maps feature identifiers to their respective groups. No missing
values or duplicate \code{feature_id} values are allowed.}

\item{k}{Integer or \code{NULL}. If specified, prepares parameters for K-NN
imputation with \code{k} neighbors. Cannot be used together with \code{ncp}.}

\item{ncp}{Integer or \code{NULL}. If specified, prepares parameters for PCA
imputation with \code{ncp} principal components. Cannot be used together with
\code{k}.}

\item{subset}{Character vector or \code{NULL}. If provided, only these column
names from \code{obj} are included in the main \code{features} column; remaining
matched features are placed in \code{aux}. If \code{NULL}, all features go into
\code{features}.}

\item{min_group_size}{Integer (default 0). Minimum number of features per
group. If a group has fewer features, additional features are randomly
sampled from remaining columns to meet this threshold.}

\item{seed}{Numeric or \code{NULL}. Random seed for reproducibility when sampling
for \code{min_group_size} padding.}
}
\value{
A \code{\link[tibble:tibble]{tibble::tibble()}} with columns:

\describe{
\item{group}{Character. The group identifier.}
\item{features}{List of character vectors. Feature IDs belonging to each
group (from \code{subset} if specified, otherwise all matched features).}
\item{aux}{List of character vectors (if non-empty). Auxiliary feature IDs
not in \code{subset}, plus any features added to meet \code{min_group_size}.
Omitted if all groups have empty auxiliary features.}
\item{parameters}{List of single-row tibbles (if \code{k} or \code{ncp} specified).
Contains the adjusted \code{k} or \code{ncp} value for each group, capped by group
size.}
}
}
\description{
Groups matrix columns (features) based on a provided grouping data.frame,
optionally preparing parameters for K-NN or PCA imputation. This function
organizes features into groups, handles subsetting, and can pad groups to
meet a minimum size requirement.
}
\examples{
sim_obj <- sim_mat(perc_col_NA = 1)

obj <- t(sim_obj$input)
obj_meta <- sim_obj$group_feature

# group `obj` based on the metadata
head(obj_meta)

# create `group_df` which can then be used for `group_imp`. We can specify
# `k` for K-NN imputation and subset here as well.
group_df <- group_features(
  obj,
  obj_meta,
  subset = sample(obj_meta$feature_id, size = 10),
  k = 10
)
group_df

imputed_obj <- group_imp(obj, group_df)
imputed_obj

}
\seealso{
\code{\link[=group_imp]{group_imp()}}
}
